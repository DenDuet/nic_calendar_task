# Быстрый старт системы прав доступа

## Что уже настроено ✅

- ✅ Созданы модели для системы прав доступа
- ✅ Созданы стандартные группы пользователей
- ✅ Настроены права для каждой группы
- ✅ Создан суперпользователь (den)
- ✅ Система протестирована и работает

## Как использовать

### 1. Вход в админ-панель
- URL: `http://127.0.0.1:8000/admin/`
- Логин: `den`
- Пароль: (который вы указали при создании)

### 2. Управление группами
В админ-панели перейдите в раздел **"Группы пользователей"**:
- **Администраторы** - полный доступ
- **Менеджеры** - управление проектами и сотрудниками
- **Сотрудники** - просмотр и ограниченное редактирование
- **Наблюдатели** - только просмотр

### 3. Назначение пользователей в группы
1. Перейдите в **"Профили пользователей"**
2. Найдите нужного пользователя
3. Выберите группу из выпадающего списка
4. Сохраните изменения

### 4. Использование в коде

#### Декораторы для проверки прав:
```python
from prjcalendar.decorators import (
    user_permission_required,
    project_access_required,
    admin_required
)

@user_permission_required('can_view_projects')
def my_view(request):
    # Только пользователи с правом просмотра проектов
    pass

@admin_required
def admin_view(request):
    # Только администраторы
    pass
```

#### Проверка прав в представлениях:
```python
from prjcalendar.permissions import get_user_permissions

def my_view(request):
    permissions = get_user_permissions(request.user)
    if permissions['can_edit_projects']:
        # Показать кнопки редактирования
        pass
```

### 5. Команды управления

```bash
# Создать группы и настроить права
python manage.py setup_permissions --all

# Только создать группы
python manage.py setup_permissions --create-groups

# Только настроить права
python manage.py setup_permissions --setup-permissions
```

## Готовые URL-маршруты

- `/projects/` - список проектов (с проверкой прав)
- `/staff/` - список сотрудников (с проверкой прав)
- `/customers/` - список заказчиков (с проверкой прав)
- `/reports/` - отчеты (с проверкой прав)
- `/users/` - управление пользователями (только для админов)

## Тестирование

Запустите тестовый скрипт:
```bash
python test_permissions.py
```

## Что дальше?

1. **Настройте права для существующих пользователей** через админ-панель
2. **Добавьте декораторы** к вашим существующим представлениям
3. **Создайте шаблоны** для отображения доступных функций
4. **Настройте логирование** для отслеживания доступа

## Поддержка

При возникновении проблем:
1. Проверьте логи Django
2. Убедитесь, что пользователь назначен в группу
3. Проверьте права группы в админ-панели
4. Запустите тестовый скрипт для диагностики


